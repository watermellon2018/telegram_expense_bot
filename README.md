# Инструкция по установке и запуску Telegram-бота для анализа расходов

## Требования

Для работы бота необходимы:
- Python 3.7 или выше
- Библиотеки, указанные в файле requirements.txt
- Токен Telegram-бота, полученный от @BotFather

## Шаги по установке

1. **Клонируйте или распакуйте архив с кодом бота**

2. **Установите необходимые зависимости**
   ```
   pip install -r requirements.txt
   ```

3. **Настройте токен бота (безопасный способ)**
   - Переименуйте файл `.env.example` в `.env`
   - Откройте файл `.env` и замените значение `your_telegram_bot_token_here` на ваш токен:
     ```
     TELEGRAM_BOT_TOKEN=your_actual_token_here
     ```
   - Файл `.env` добавлен в `.gitignore` и не будет отправлен в репозиторий

   **Альтернативный способ**: Вы также можете установить переменную окружения `TELEGRAM_BOT_TOKEN` в вашей системе.


4. **Запустите бота**
   ```
   python main.py
   ```

## Получение токена Telegram-бота

1. Откройте Telegram и найдите @BotFather
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания нового бота
4. После создания бота вы получите токен, который нужно скопировать в файл `config.py`

## Основные команды бота

- `/start` - начало работы с ботом, приветствие и инструкции
- `/help` - получение справки по командам
- `/add <сумма> <категория> [описание]` - добавление расхода
- `/month` - статистика за текущий месяц
- `/day` - статистика за текущий день
- `/category <название>` - расходы по конкретной категории
- `/stats` - общая статистика расходов
- `/budget <сумма>` - установка бюджета на месяц
- `/export` - экспорт всех расходов в Excel
- `/export_stats` - экспорт детальной статистики

## Структура проекта

```
telegram_expense_bot/
├── main.py                 # Основной файл запуска бота
├── config.py               # Конфигурационные параметры
├── requirements.txt        # Зависимости проекта
├── data/                   # Директория для хранения данных
│   └── users/              # Данные пользователей
├── handlers/               # Обработчики команд
│   ├── __init__.py
│   ├── start.py            # Обработчик команды /start
│   ├── expense.py          # Обработчик добавления расходов
│   ├── stats.py            # Обработчики статистики и графиков
│   ├── export.py           # Обработчики экспорта данных
│   └── project.py          # Обработчики проектов
├── utils/                  # Вспомогательные функции
│   ├── __init__.py
│   ├── excel.py            # Функции для работы с Excel
│   ├── visualization.py    # Функции для создания графиков
│   └── helpers.py          # Общие вспомогательные функции
└── tests/                  # Тесты
    └── test_bot.py         # Тесты функциональности
```

## Работа с проектами

Бот поддерживает разделение расходов по проектам (например, "Отпуск", "Ремонт"):

- `/project_create <название>` - создать новый проект
- `/project_list` - список всех проектов
- `/project_select <название или ID>` - переключиться на проект
- `/project_main` - вернуться к общим расходам
- `/project_delete <название или ID>` - удалить проект
- `/project_info` - информация о текущем проекте

## Добавление новых категорий расходов

Для добавления новых категорий расходов:
1. Откройте файл `config.py`
2. Добавьте новую категорию в словарь `DEFAULT_CATEGORIES`
3. Добавьте цвет для новой категории в словарь `COLORS`
4. Перезапустите бота

## Устранение неполадок

Если бот не запускается или работает некорректно:
1. Убедитесь, что все зависимости установлены
2. Проверьте правильность токена в файле `config.py`
3. Проверьте наличие прав на запись в директорию `data/`
4. Проверьте логи на наличие ошибок

## Контакты для поддержки

Если у вас возникли вопросы или проблемы с использованием бота, пожалуйста, обратитесь к разработчику.
