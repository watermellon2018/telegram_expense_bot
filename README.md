# Инструкция по установке и запуску Telegram-бота для анализа расходов

## Требования

Для работы бота необходимы:
- Python 3.7 или выше
- Библиотеки, указанные в файле requirements.txt
- Токен Telegram-бота, полученный от @BotFather

## Шаги по установке

1. **Клонируйте или распакуйте архив с кодом бота**

2. **Установите необходимые зависимости**
   ```
   pip install -r requirements.txt
   ```

3. **Настройте токен бота (безопасный способ)**
   - Переименуйте файл `.env.example` в `.env`
   - Откройте файл `.env` и замените значение `your_telegram_bot_token_here` на ваш токен:
     ```
     TELEGRAM_BOT_TOKEN=your_actual_token_here
     ```
   - Файл `.env` добавлен в `.gitignore` и не будет отправлен в репозиторий

   **Альтернативный способ**: Вы также можете установить переменную окружения `TELEGRAM_BOT_TOKEN` в вашей системе.


4. **Запустите бота**
   ```
   python main.py
   ```

## Получение токена Telegram-бота

1. Откройте Telegram и найдите @BotFather
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания нового бота
4. После создания бота вы получите токен, который нужно скопировать в файл `config.py`

## Основные команды бота

- `/start` - начало работы с ботом, приветствие и инструкции
- `/help` - получение справки по командам
- `/add <сумма> <категория> [описание]` - добавление расхода
- `/month` - статистика за текущий месяц
- `/category <название>` - расходы по конкретной категории
- `/stats` - общая статистика расходов
- `/budget <сумма>` - установка бюджета на месяц
- `/autostat` - информация об автоматической отправке статистики
- `/monthend` - получение полной статистики за месяц (имитация автоматической отправки)

## Структура проекта

```
telegram_expense_bot/
├── main.py                 # Основной файл запуска бота
├── config.py               # Конфигурационные параметры
├── requirements.txt        # Зависимости проекта
├── data/                   # Директория для хранения данных
│   └── users/              # Данные пользователей
├── handlers/               # Обработчики команд
│   ├── __init__.py
│   ├── start.py            # Обработчик команды /start
│   ├── expense.py          # Обработчик добавления расходов
│   ├── stats.py            # Обработчики статистики и графиков
│   └── reminder.py         # Обработчики напоминаний
├── utils/                  # Вспомогательные функции
│   ├── __init__.py
│   ├── excel.py            # Функции для работы с Excel
│   ├── visualization.py    # Функции для создания графиков
│   └── helpers.py          # Общие вспомогательные функции
└── tests/                  # Тесты
    └── test_bot.py         # Тесты функциональности
```

## Настройка автоматической отправки статистики

Из-за технических ограничений, автоматическая отправка статистики в конце месяца временно недоступна. Вместо этого вы можете:

1. Использовать команду `/monthend` для получения полной статистики за месяц в любое время
2. Настроить напоминание в своем календаре на последний день месяца
3. Использовать команду `/remind` для получения инструкций по настройке напоминаний

## Добавление новых категорий расходов

Для добавления новых категорий расходов:
1. Откройте файл `config.py`
2. Добавьте новую категорию в словарь `DEFAULT_CATEGORIES`
3. Добавьте цвет для новой категории в словарь `COLORS`
4. Перезапустите бота

## Устранение неполадок

Если бот не запускается или работает некорректно:
1. Убедитесь, что все зависимости установлены
2. Проверьте правильность токена в файле `config.py`
3. Проверьте наличие прав на запись в директорию `data/`
4. Проверьте логи на наличие ошибок

## Контакты для поддержки

Если у вас возникли вопросы или проблемы с использованием бота, пожалуйста, обратитесь к разработчику.
